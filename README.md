# Mad2Moi Blog Platform

A full-stack blog platform with admin dashboard, AI-powered content generation, and real-time chat support.

## ğŸ—ï¸ Architecture

This project consists of two main applications:

- **Blog**: Public-facing blog built with Astro (`/blog`)
- **Admin**: Administrative dashboard built with Astro + React (`/adminblog`)

## ğŸš€ Quick Start (Local Development)

### Prerequisites

- Node.js 18+ 
- npm or yarn
- MongoDB Atlas account (for chat system)
- OpenAI API key (for AI features)

### Installation

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd danialblogs-chat_work
   ```

2. **Install dependencies**
   ```bash
   # Admin Dashboard
   cd adminblog
   npm install

   # Blog
   cd ../blog  
   npm install
   ```

3. **Configure environment variables**
   ```bash
   # Copy the example config
   cp config.env .env
   
   # Edit .env with your values:
   # - OPENAI_API_KEY: Your OpenAI API key
   # - MONGO_URI: Your MongoDB connection string
   # - Generate secure secrets for JWT and sessions
   ```

4. **Initialize databases**
   ```bash
   cd adminblog
   npm run setup
   ```

5. **Start development servers**
   ```bash
   # Terminal 1: Admin Dashboard
   cd adminblog
   npm run dev

   # Terminal 2: Blog
   cd blog
   npm run dev
   ```

Visit:
- Blog: http://localhost:4321
- Admin: http://localhost:4322

## ğŸŒ Deployment on Render

### Automatic Deployment

This project includes a `render.yaml` configuration for easy deployment:

1. **Push to GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin <your-github-repo>
   git push -u origin main
   ```

2. **Deploy on Render**
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect `render.yaml` and deploy both services

3. **Configure Environment Variables**
   
   Set these in the Render dashboard for each service:

   **Admin Service:**
   - `OPENAI_API_KEY`: Your OpenAI API key
   - `MONGO_URI`: Your MongoDB Atlas connection string
   - Other secrets are auto-generated by Render

   **Blog Service:**
   - No additional config needed

### Manual Deployment

If you prefer manual deployment:

1. **Admin Dashboard**
   - Service Type: Web Service
   - Build Command: `cd adminblog && npm install && npm run build`
   - Start Command: `cd adminblog && npm start`

2. **Blog**
   - Service Type: Web Service  
   - Build Command: `cd blog && npm install && npm run build`
   - Start Command: `cd blog && npm start`

## âš™ï¸ Environment Variables

| Variable | Description | Required | Default |
|----------|-------------|----------|---------|
| `OPENAI_API_KEY` | OpenAI API key for AI features | Yes | - |
| `MONGO_URI` | MongoDB connection string | Yes | - |
| `ADMIN_JWT_SECRET` | JWT signing secret | Yes | Auto-generated |
| `ADMIN_SESSION_SECRET` | Session secret | Yes | Auto-generated |
| `BLOG_REBUILD_TOKEN` | Webhook security token | Yes | Auto-generated |
| `NODE_ENV` | Environment | No | `production` |
| `DB_DRIVER` | Database driver | No | `sqlite` |

## ğŸ“Š Features

### Blog Features
- âœ… Responsive design
- âœ… SEO optimized
- âœ… RSS feed
- âœ… Article categories and tags
- âœ… Reading time estimates
- âœ… Image optimization
- âœ… Live chat widget

### Admin Features
- âœ… User management
- âœ… Article CRUD operations
- âœ… AI-powered content generation
- âœ… Real-time chat support
- âœ… Analytics dashboard
- âœ… Media management
- âœ… Settings configuration

### AI Features
- âœ… GPT-powered article generation
- âœ… Custom article sizes (600/1500/3000 words)
- âœ… AI image generation
- âœ… Chat auto-responses
- âœ… Content suggestions

## ğŸ”’ Security Notes

### Before Deployment:
- âœ… All hardcoded API keys have been removed
- âœ… Environment variables are properly configured
- âœ… Sensitive files are in `.gitignore`
- âœ… MongoDB credentials are secured

### Production Checklist:
- [ ] Change all default passwords
- [ ] Use strong JWT secrets
- [ ] Enable HTTPS
- [ ] Configure CORS properly
- [ ] Set up monitoring
- [ ] Configure backups

## ğŸ”§ Development

### Database Setup
The admin uses SQLite by default for simplicity. MongoDB is used for the chat system.

### API Endpoints
- `/api/articles` - Article management
- `/api/users` - User management  
- `/api/chat-stream` - Chat system
- `/api/session` - Authentication

### File Structure
```
â”œâ”€â”€ adminblog/          # Admin dashboard
â”‚   â”œâ”€â”€ public/         # Static assets
â”‚   â”œâ”€â”€ src/           # Source code
â”‚   â””â”€â”€ scripts/       # Database utilities
â”œâ”€â”€ blog/              # Public blog
â”‚   â”œâ”€â”€ public/        # Static assets
â”‚   â””â”€â”€ src/          # Source code
â””â”€â”€ config.env        # Environment config
```

## ğŸ› Troubleshooting

### Common Issues

1. **Port conflicts**
   - Admin runs on port 4322
   - Blog runs on port 4321
   - Make sure ports are available

2. **Database connection errors**
   - Check MongoDB URI is correct
   - Ensure network access is allowed
   - Verify credentials

3. **OpenAI API errors**
   - Check API key is valid
   - Verify you have sufficient credits
   - Check rate limits

### Support

For issues and questions:
- Check the console for error messages
- Verify environment variables are set
- Ensure all dependencies are installed

## ğŸ“ License

MIT License - see LICENSE file for details
